<!DOCTYPE html><html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>üö≤ Fiets Game Bergen ‚Äì Route A‚ÄìI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />  <style>
    html, body {
      margin:0; padding:0; height:100%;
      font-family: system-ui, sans-serif;
      background:#f6f7f9;
    }

    .app { padding:16px; max-width:480px; margin:0 auto; }

    h1 { font-size:20px; margin-bottom:4px; }
    .subtitle { font-size:14px; color:#555; margin-bottom:12px; }

    .location {
      background:white;
      border-radius:12px;
      padding:12px;
      margin-bottom:10px;
      box-shadow:0 4px 10px rgba(0,0,0,0.08);
      display:flex;
      align-items:center;
      cursor:pointer;
    }

    .letter {
      width:36px; height:36px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-size:18px; font-weight:700;
      margin-right:12px;
      background:#9ca3af; color:white;
      flex-shrink:0;
    }

    .letter.green { background:#16a34a; }

    .info { flex:1; }
    .status { font-size:13px; font-weight:600; }
    .locked { color:#9ca3af; }
    .unlocked { color:#16a34a; }

    .distance { font-size:13px; color:#2563eb; }

    /* MAP FULLSCREEN */
    .map-btn {
      position:fixed; top:12px; right:12px;
      background:#111827; color:white;
      width:44px; height:44px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-size:20px; z-index:2000;
    }

    #mapOverlay {
      position:fixed; inset:0; background:white;
      display:none; z-index:3000;
    }

    #map { height:100%; width:100%; }

    .closeMap {
      position:absolute; top:12px; right:12px;
      background:#111827; color:white;
      padding:10px 14px; border-radius:10px;
      z-index:4000;
    }

    .leaflet-control-zoom,
    .leaflet-control-attribution { display:none !important; }
  </style></head>
<body><div class="map-btn" onclick="openMap()">üó∫Ô∏è</div><div class="app">
  <h1>üö≤ Fietsroute Spel</h1>
  <div class="subtitle">Volg de route A ‚Üí I. Ga dichtbij om te ontgrendelen.</div>
  <div id="list"></div>
</div><div id="mapOverlay">
  <div class="closeMap" onclick="closeMap()">Sluiten ‚úï</div>
  <div id="map"></div>
</div><script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script><script>
// ======================
// ROUTE LOCATIES (OP VOLGORDE)
// ======================

const locaties = [
  { letter:'A', naam:'Bergen Centrum', coords:[52.6696,4.7053], vraag:'Wat is de startplaats?' },
  { letter:'B', naam:'Bergerbos', coords:[52.6739,4.6825], vraag:'Noem √©√©n boomsoort die je ziet.' },
  { letter:'C', naam:'Schoorlse Duinen', coords:[52.6919,4.6732], vraag:'Wat is het hoogste punt van Schoorl?' },
  { letter:'D', naam:'Duinweg Uitzicht', coords:[52.6802,4.6559], vraag:'Wat zie je hier in de verte?' },
  { letter:'E', naam:'Zeeweg Bosrand', coords:[52.6612,4.6668], vraag:'Hoor je de zee? ja/nee' },
  { letter:'F', naam:'Park Meerwijk', coords:[52.6659,4.7202], vraag:'Welke kleur heeft het water?' },
  { letter:'G', naam:'Bergense Bos', coords:[52.6711,4.6889], vraag:'Hoeveel mensen zijn er?' },
  { letter:'H', naam:'Muurhuizen 241', coords:[52.6669,4.7069], vraag:'Wat voor gebouw is dit?' },
  { letter:'I', naam:'Terug naar Bergen', coords:[52.6696,4.7053], vraag:'üéâ Wie gaat met pensioen?' }
];

let userPos = null;
let unlocked = JSON.parse(localStorage.getItem('unlocked') || '{}');
let cooldowns = JSON.parse(localStorage.getItem('cooldowns') || '{}');

// ======================
// LIST RENDER
// ======================

function render() {
  const list = document.getElementById('list');
  list.innerHTML = '';

  locaties.forEach(l => {
    const isUnlocked = unlocked[l.letter];

    const el = document.createElement('div');
    el.className = 'location';

    el.innerHTML = `
      <div class="letter ${isUnlocked ? 'green':''}">${l.letter}</div>
      <div class="info">
        <b>${l.naam}</b><br>
        <span class="status ${isUnlocked ? 'unlocked':'locked'}">
          ${isUnlocked ? 'Ontgrendeld' : 'Vergrendeld'}
        </span>
      </div>
    `;

    el.onclick = () => handleClick(l);
    list.appendChild(el);
  });
}

// ======================
// CLICK / QUIZ
// ======================

function handleClick(loc) {
  if (!unlocked[loc.letter]) return alert('Nog niet dichtbij genoeg');

  const now = Date.now();
  if (cooldowns[loc.letter] && now < cooldowns[loc.letter]) {
    const mins = Math.ceil((cooldowns[loc.letter]-now)/60000);
    return alert(`Fout antwoord. Wacht ${mins} min.`);
  }

  const answer = prompt(loc.vraag);
  if (!answer) return;

  // simpele check: alles is goed behalve "nee"
  if (answer.toLowerCase() === 'nee') {
    cooldowns[loc.letter] = Date.now() + 5*60000;
    localStorage.setItem('cooldowns', JSON.stringify(cooldowns));
    alert('‚ùå Fout! 5 minuten wachten.');
  } else {
    alert('‚úÖ Goed! Ga door naar de volgende locatie.');
  }
}

// ======================
// GPS CHECK
// ======================

function checkDistance() {
  if (!userPos) return;

  locaties.forEach(l => {
    const d = dist(userPos.lat,userPos.lng,l.coords[0],l.coords[1]);
    if (d < 100 && !unlocked[l.letter]) {
      unlocked[l.letter] = true;
      localStorage.setItem('unlocked', JSON.stringify(unlocked));
      render();
    }
  });
}

if (navigator.geolocation) {
  navigator.geolocation.watchPosition(pos => {
    userPos = { lat:pos.coords.latitude, lng:pos.coords.longitude };
    userMarker.setLatLng([userPos.lat,userPos.lng]);
    map.setView([userPos.lat,userPos.lng],14);
    checkDistance();
  }, null, { enableHighAccuracy:true });
}

// ======================
// MAP (ALLEEN JIJ)
// ======================

const map = L.map('map', { zoomControl:false });
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

const userMarker = L.circleMarker([0,0], { radius:8, color:'#2563eb', fillOpacity:1 }).addTo(map);

function openMap() { document.getElementById('mapOverlay').style.display='block'; map.invalidateSize(); }
function closeMap() { document.getElementById('mapOverlay').style.display='none'; }

function dist(lat1,lon1,lat2,lon2){
  const R=6371e3,toRad=x=>x*Math.PI/180;
  const dLat=toRad(lat2-lat1),dLon=toRad(lon2-lon1);
  const a=Math.sin(dLat/2)**2+Math.cos(toRad(lat1))*Math.cos(toRad(lat2))*Math.sin(dLon/2)**2;
  return R*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
}

render();
</script></body>
</html>
